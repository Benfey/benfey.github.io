/*!
  * Simple-Jekyll-Search
  * Copyright 2015-2020, Christian Fei
  * Licensed under the MIT License.
  */
!function(){"use strict";var f={compile:function(r){return i.template.replace(i.pattern,function(t,e){var n=i.middleware(e,r[e],i.template);return void 0!==n?n:r[e]||t})},setOptions:function(t){i.pattern=t.pattern||i.pattern,i.template=t.template||i.template,"function"==typeof t.middleware&&(i.middleware=t.middleware)}};const i={pattern:/\{(.*?)\}/g,template:"",middleware:function(){}};var n=function(t,e){var n=e.length,r=t.length;if(n<r)return!1;if(r===n)return t===e;t:for(var i=0,o=0;i<r;i++){for(var u=t.charCodeAt(i);o<n;)if(e.charCodeAt(o++)===u)continue t;return!1}return!0},e=new function(){this.matches=function(t,e){return n(e.toLowerCase(),t.toLowerCase())}},r=new function(){this.matches=function(e,t){return!!e&&(e=e.trim().toLowerCase(),(t=t.trim().toLowerCase()).split(" ").filter(function(t){return 0<t.length}).reduce(function(t,n){return t&&-1<e.indexOf(n)},!0))}},o=new function(){this.matches=function(t,e){return!!(t&&e)&&t.toLowerCase().indexOf(e.toLowerCase())!==-1}},u={put:function(t){if(l(t))return p(t);if(function(t){return Boolean(t)&&"[object Array]"===Object.prototype.toString.call(t)}(t))return function(n){const r=[];s();for(let t=0,e=n.length;t<e;t++){let e=p(n[t]);e&&r.push(e)}return r}(t);return undefined},clear:s,search:function(t){return t?function(e,n,r,i){const o=[];for(let t=0;t<e.length&&o.length<i.limit;t++){var u=d(e[t],n,r,i);u&&o.push(u)}return o}(c,t,a.searchStrategy,a).sort(a.sort):[]},setOptions:function(t){(a=t||{}).fuzzy=t.fuzzy||!1,a.limit=t.limit||10,a.searchStrategy=t.fuzzy?e:o,a.sort=t.sort||h,a.exclude=t.exclude||[]}};function l(t){return Boolean(t)&&"[object Object]"===Object.prototype.toString.call(t)}function s(){return c.length=0,c}function p(t){if(!l(t))return;const e=Object.keys(t);for(let n=0;n<e.length;n++){const r=e[n];if(-1!==a.exclude.indexOf(r))return}return c.push(t),t}function d(t,e,n,r){for(const i in t)if(!function(t,e){for(let n=!1,r=0,i=(e=e||[]).length;r<i;r++){var o=e[r];!n&&new RegExp(t).test(o)&&(n=!0)}return n}(i,r.exclude)&&n.matches(t[i],e))return t}function h(){return 0}const c=[];let a={};a.fuzzy=!1,a.limit=10,a.searchStrategy=a.fuzzy?e:o,a.sort=h,a.exclude=[];var m={load:function(t,e){const n=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");n.open("GET",t,!0),n.onreadystatechange=function(t,e){return function(){if(4===t.readyState&&200===t.status)try{e(null,JSON.parse(t.responseText))}catch(n){e(n,null)}}}(n,e),n.send()}};var t={searchInput:null,resultsContainer:null,json:[],success:Function.prototype,searchResultTemplate:'<li><a href="{url}" title="{desc}">{title}</a></li>',templateMiddleware:Function.prototype,sortMiddleware:function(){return 0},noResultsText:"No results found",limit:10,fuzzy:!1,debounceTime:0,exclude:[],middleware:Function.prototype};const v=function y(t){if(!function(t){return!!t&&"undefined"!=typeof t.required&&t.required instanceof Array}(t))throw new Error("-- OptionsValidator: required options missing");if(!(this instanceof y))return new y(t);const r=t.required;this.getRequiredOptions=function(){return r},this.validate=function(e){const n=[];return r.forEach(function(t){"undefined"==typeof e[t]&&n.push(t)}),n}}({required:w});function g(t){return Boolean(t)&&"[object Object]"===Object.prototype.toString.call(t)}function O(t){return t.replace(/^\s+|\s+$/g,"")}const w=["searchInput","resultsContainer","json"];return window.SimpleJekyllSearch=function(t){var e;0<v.validate(t).length&&function(t){throw new Error("SimpleJekyllSearch --- "+t)}("You must specify the following required options: "+w),t=Object.assign({},t,function(t){return g(t.searchInput)||(t.searchInput=document.querySelector(t.searchInput)),g(t.resultsContainer)||(t.resultsContainer=document.querySelector(t.resultsContainer)),t}(t)),f.setOptions({template:t.searchResultTemplate,middleware:t.templateMiddleware}),u.setOptions({fuzzy:t.fuzzy,limit:t.limit,sort:t.sortMiddleware,exclude:t.exclude}),g(t.json)?e=t.json:function(t){return"string"==typeof t&&!!t.length}(t.json)?m.load(t.json,function(t,e){t&&function(t){throw new Error("SimpleJekyllSearch --- "+t)}("failed to get JSON ("+t+")"),function(t){u.put(t),r.searchInput.addEventListener("input",function(t){var e;-1===[13,16,20,37,38,39,40,91].indexOf(t.which)&&(function(t){return Boolean(t)&&0<t.length}(t.target.value)?(n=r.noResultsText,s=(e=r.resultsContainer).innerHTML=n,e.setAttribute("data-sr-text",n),function(t){var e=t.length;if(0===e)return a(r.noResultsText);for(let n=0;n<e;n++)t[n].query=i.value;return function(t){var e=t.length;if(0===e)return a(r.noResultsText);let n="";for(let r=0;r<e;r++)n+=f.compile(t[r]);i.innerHTML=n}(t)}(u.search(O(t.target.value)))):(e=r.resultsContainer,s="",e.innerHTML=s,e.setAttribute("data-sr-text",s)));var n,s,e})})(e)}):function(t){throw new Error("SimpleJekyllSearch --- "+t)}("provided json is not a valid url and is not an object"),e&&function(t){u.put(t);const i=r.searchInput,o=r.resultsContainer;function n(t){var e=t.length;if(0===e)return a(r.noResultsText);for(let n=0;n<e;n++)t[n].query=i.value;return function(t){var e=t.length;if(0===e)return a(r.noResultsText);let n="";for(let r=0;r<e;r++)n+=f.compile(t[r]);o.innerHTML=n}(t)}function a(t){o.innerHTML='<div class="no-results">'+t+"</div>"}let s=null;function e(){clearTimeout(s),s=setTimeout(function(){var t,e;-1===[13,16,20,37,38,39,40,91].indexOf(event.which)&&(function(t){return Boolean(t)&&0<t.length}((t=i).value||t.getAttribute("value")||"")?(e=r.middleware(O(i.value),u.search(O(i.value)),r.json),r.success(e),n(e)):a(""))},r.debounceTime)}i.addEventListener("input",e),0<r.debounceTime?i.addEventListener("keyup",e):i.addEventListener("keyup",function(){-1===[13,16,20,37,38,39,40,91].indexOf(event.which)&&e()})}(e);const r=t;return{search:u.search}},window.SimpleJekyllSearch}();